# Решение проблемы с пустыми данными в Google Таблице

## Проблема
Данные из формы не передаются в Google Таблицу - записываются только дата/время, остальные поля пустые.

## Исправления

### 1. Обновите Google Apps Script
Используйте код из `google-script-fixed.gs` с улучшенным логированием.

### 2. Обновите HTML
Код в `index.html` был обновлен для корректной отправки данных.

### 3. Пошаговая отладка

#### Шаг 1: Протестируйте Google Apps Script
1. Откройте Google Apps Script
2. Выберите функцию `testDoPost()` 
3. Нажмите "Выполнить"
4. Проверьте логи выполнения

#### Шаг 2: Протестируйте отправку данных
1. Откройте файл `test-form.html` в браузере
2. Обновите `GOOGLE_SCRIPT_URL` на ваш реальный URL
3. Заполните форму и отправьте
4. Проверьте консоль браузера (F12)
5. Проверьте Google Таблицу

#### Шаг 3: Проверьте основной сайт
1. Откройте `index.html`
2. Попробуйте забронировать подарок
3. Проверьте консоль браузера на наличие ошибок
4. Проверьте логи Google Apps Script

## Что проверить

### В консоли браузера должно быть:
```
Отправляемые данные:
giftName : Название подарка
userName : Имя пользователя
userPhone : Телефон
userEmail : Email
userMessage : Сообщение
timestamp : 2025-07-02T...
```

### В логах Google Apps Script должно быть:
```
Полученный объект e: {...}
e.parameter: {giftName: "...", userName: "...", ...}
Используем e.parameter: {...}
Извлеченные данные формы: {...}
```

## Если проблема сохраняется

1. **Проверьте URL**: Убедитесь, что используете URL веб-приложения (должен заканчиваться на `/exec`)
2. **Проверьте разрешения**: Google Apps Script должен иметь доступ к Google Sheets
3. **Проверьте развертывание**: Создайте новое развертывание веб-приложения
4. **Проверьте CORS**: Google Apps Script автоматически обрабатывает CORS для веб-приложений

## Альтернативное решение

Если проблемы продолжаются, попробуйте отправлять данные как JSON:

```javascript
// В HTML замените submitReservation на:
const response = await fetch(GOOGLE_SCRIPT_URL, {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
    },
    body: JSON.stringify(Object.fromEntries(formData))
});
```

И в Google Apps Script добавьте обработку JSON в начале функции `doPost`.
